<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>„Åï„Çì„Åô„ÅÜ„Çø„Ç§„É†„Ç¢„Çø„ÉÉ„ÇØÔºÅ</title>
    <style>
        :root {
            --primary-bg: #e0f7fa;
            --card-bg: #ffffff;
            --accent-color: #ff4081;
            --plus-color: #ff6b6b;
            --minus-color: #4dadff;
            --multi-color: #ff9f43;
            --home-color: #95a5a6;
        }

        body {
            font-family: 'Helvetica Neue', Arial, "Hiragino Kaku Gothic ProN", "Hiragino Sans", Meiryo, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            /* ËèØ„ÇÑ„Åã„Å™„Ç∞„É©„Éá„Éº„Ç∑„Éß„É≥ËÉåÊôØ */
            background: linear-gradient(135deg, #fbc2eb 0%, #a6c1ee 100%);
        }

        #game-container {
            background: rgba(255, 255, 255, 0.95);
            padding: 2.5rem;
            border-radius: 30px;
            box-shadow: 0 15px 35px rgba(0,0,0,0.15);
            text-align: center;
            width: 90%;
            max-width: 450px;
            position: relative; /* ‚óé„ÇíË°®Á§∫„Åô„Çã„Åü„ÇÅ„Å´ÂøÖË¶Å */
        }

        .hidden { display: none; }

        /* „Çø„Ç§„Éà„É´Ë£ÖÈ£æ */
        .main-title {
            font-size: 2rem;
            color: #444;
            margin-bottom: 5px;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }
        .sub-title {
            font-size: 0.9rem;
            color: #888;
            margin-bottom: 25px;
        }

        .btn-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 15px;
            margin-top: 10px;
        }

        /* „Ç≥„Éº„ÇπÈÅ∏Êäû„Éú„Çø„É≥ */
        button {
            padding: 18px;
            font-size: 1.3rem;
            cursor: pointer;
            border: none;
            border-radius: 15px;
            color: white;
            font-weight: bold;
            transition: all 0.2s;
            box-shadow: 0 5px 0 rgba(0,0,0,0.1);
        }

        button:active {
            transform: translateY(3px);
            box-shadow: 0 2px 0 rgba(0,0,0,0.1);
        }

        .op-plus { background: linear-gradient(to bottom, #ff8787, #ff6b6b); }
        .op-minus { background: linear-gradient(to bottom, #74c0fc, #4dadff); }
        .op-multi { background: linear-gradient(to bottom, #ffbf69, #ff9f43); }
        
        /* „Éõ„Éº„É†„Å´Êàª„Çã„Éú„Çø„É≥ */
        .home-link {
            display: inline-block;
            margin-top: 25px;
            color: var(--home-color);
            text-decoration: none;
            font-size: 1rem;
            font-weight: bold;
            border-bottom: 2px solid var(--home-color);
            transition: opacity 0.2s;
        }
        .home-link:hover { opacity: 0.7; }

        /* „Ç≤„Éº„É†‰∏≠ÁîªÈù¢ */
        #question { font-size: 4rem; margin: 20px 0; color: #333; }
        #progress { font-size: 1.1rem; color: #777; background: #eee; border-radius: 20px; padding: 5px; }
        .choice-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
        }
        .choice-btn { background-color: #6c5ce7; }

        /* ÁµêÊûúÁîªÈù¢ */
        #result-time { font-size: 3rem; color: var(--accent-color); margin: 15px 0; }

        /* ‚ñº‚ñº‚ñº ËøΩÂä†ÔºöÊ≠£Ëß£„ÅÆ‚óé„Éû„Éº„ÇØ ‚ñº‚ñº‚ñº */
        #correct-mark {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 150px;
            color: #ff3d00;
            font-weight: bold;
            display: none; /* ÊúÄÂàù„ÅØÈö†„Åó„Å¶„Åä„Åè */
            z-index: 100;
            pointer-events: none;
            text-shadow: 2px 2px 0px white;
        }
    </style>
</head>
<body>

<div id="game-container">
    <div id="correct-mark">‚óé</div>

    <div id="start-screen">
        <div class="main-title">‚ú® „Åï„Çì„Åô„ÅÜ ‚ú®<br>„Çø„Ç§„É†„Ç¢„Çø„ÉÉ„ÇØÔºÅ</div>
        <div class="sub-title">10„ÇÇ„Çì„ÄÅ„Å®„Åë„Çã„Åã„Å™Ôºü</div>
        
        <div class="btn-grid">
            <button class="op-plus" onclick="startGame('+')">„Åü„Åó„Åñ„Çì (Ôºã)</button>
            <button class="op-minus" onclick="startGame('-')">„Å≤„Åç„Åñ„Çì (Ôºç)</button>
            <button class="op-multi" onclick="startGame('√ó')">„Åã„Åë„Åñ„Çì (√ó)</button>
        </div>

        <a href="index.html" class="home-link">üè† „Éõ„Éº„É†„Éö„Éº„Ç∏„Å´„ÇÇ„Å©„Çã</a>
    </div>

    <div id="quiz-screen" class="hidden">
        <span id="progress">„Å†„ÅÑ 1 / 10 „ÇÇ„Çì</span>
        <div id="question">0 + 0</div>
        <div id="choices" class="choice-grid"></div>
    </div>

    <div id="result-screen" class="hidden">
        <div class="main-title">üö© „Ç¥„Éº„É´ÔºÅ</div>
        <p>„ÅÇ„Å™„Åü„ÅÆ„Çø„Ç§„É†</p>
        <div id="result-time">0.00Áßí</div>
        <button class="op-plus" style="width: 100%;" onclick="resetGame()">„ÇÇ„ÅÜ„ÅÑ„Å°„Å© „ÅÇ„Åù„Å∂</button>
        <br>
        <a href="index.html" class="home-link">üè† „Éõ„Éº„É†„Éö„Éº„Ç∏„Å´„ÇÇ„Å©„Çã</a>
    </div>
</div>

<script>
    let currentQuestion = 0;
    let operator = '';
    let correctAnswer = 0;
    let startTime;
    const totalQuestions = 10;

    function startGame(op) {
        operator = op;
        currentQuestion = 1;
        startTime = Date.now();
        document.getElementById('start-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('quiz-screen').classList.remove('hidden');
        nextQuestion();
    }

    function nextQuestion() {
        if (currentQuestion > totalQuestions) {
            endGame();
            return;
        }

        document.getElementById('progress').innerText = `„Å†„ÅÑ ${currentQuestion} / ${totalQuestions} „ÇÇ„Çì`;
        
        let n1 = Math.floor(Math.random() * 10);
        let n2 = Math.floor(Math.random() * 10);

        if (operator === '-' && n1 < n2) [n1, n2] = [n2, n1];

        if (operator === '+') correctAnswer = n1 + n2;
        else if (operator === '-') correctAnswer = n1 - n2;
        else if (operator === '√ó') correctAnswer = n1 * n2;

        document.getElementById('question').innerText = `${n1} ${operator} ${n2}`;
        generateChoices(correctAnswer);
    }

    function generateChoices(correct) {
        const choicesDiv = document.getElementById('choices');
        choicesDiv.innerHTML = '';
        let choices = new Set([correct]);

        while(choices.size < 4) {
            let diff = Math.floor(Math.random() * 10) - 5;
            let wrong = correct + diff;
            if (wrong >= 0 && !choices.has(wrong)) choices.add(wrong);
        }

        let choiceArray = Array.from(choices).sort(() => Math.random() - 0.5);

        choiceArray.forEach(val => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.innerText = val;
            
            // „Åì„Åì„ÅßcheckAnswer„ÇíÂëº„Å≥Âá∫„Åô„Å®„Åç„Å´„ÄÅ„Éú„Çø„É≥Ëá™‰Ωì„ÇíÁÑ°ÂäπÂåñ„Åô„ÇãÂá¶ÁêÜ„Å™„Å©„ÅØÂÖ•„Çå„Å¶„ÅÑ„Åæ„Åõ„Çì„Åå„ÄÅ
            // 0.2Áßí„ÅßÂàá„ÇäÊõø„Çè„Çã„ÅÆ„ÅßÈÄ£Êâì„ÅÆÂïèÈ°å„ÅØÂ∞ë„Å™„ÅÑ„ÅØ„Åö„Åß„Åô„ÄÇ
            btn.onclick = () => checkAnswer(val);
            choicesDiv.appendChild(btn);
        });
    }

    function checkAnswer(selected) {
        if (selected === correctAnswer) {
            // ‚ñº‚ñº‚ñº Â§âÊõ¥ÔºöÊ≠£Ëß£„ÅÆÂá¶ÁêÜ ‚ñº‚ñº‚ñº
            const mark = document.getElementById('correct-mark');
            mark.style.display = 'block'; // ‚óé„ÇíË°®Á§∫

            // 0.2ÁßíÂæÖ„Å£„Å¶„Åã„ÇâÊ¨°„ÅÆÂïèÈ°å„Å∏Ôºà„Çπ„Éî„Éº„ÉâÊÑüÈáçË¶ñÔºâ
            setTimeout(() => {
                mark.style.display = 'none'; // ‚óé„ÇíÊ∂à„Åô
                currentQuestion++;
                nextQuestion();
            }, 200);

        } else {
            // ‚ñº‚ñº‚ñº ‰∏çÊ≠£Ëß£„ÅÆÂá¶ÁêÜÔºàËÉåÊôØ„ÇíËµ§„Åè„Éï„É©„ÉÉ„Ç∑„É•Ôºâ ‚ñº‚ñº‚ñº
            document.body.style.backgroundColor = "#ff7675";
            setTimeout(() => { document.body.style.backgroundColor = ""; }, 150);
        }
    }

    function endGame() {
        const duration = ((Date.now() - startTime) / 1000).toFixed(2);
        document.getElementById('quiz-screen').classList.add('hidden');
        document.getElementById('result-screen').classList.remove('hidden');
        document.getElementById('result-time').innerText = `${duration}Áßí`;
    }

    function resetGame() {
        document.getElementById('result-screen').classList.add('hidden');
        document.getElementById('start-screen').classList.remove('hidden');
    }
</script>

</body>
</html>