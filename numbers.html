<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1ã‹ã‚‰25ã¾ã§ ã‚¿ãƒƒãƒï¼</title>
    <style>
        body {
            font-family: "UD Digital Kyokasho-tai-R", "Hiragino Kaku Gothic ProN", sans-serif;
            background-color: #e0f7fa; /* çˆ½ã‚„ã‹ãªæ°´è‰² */
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            touch-action: manipulation;
        }

        #game-container {
            text-align: center;
            background: white;
            padding: 20px;
            border-radius: 30px;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            width: 95%;
            max-width: 500px;
        }

        .screen { display: none; }
        .active { display: block; }

        h1 { color: #0097a7; font-size: 24px; margin: 10px 0; }

        /* ã‚²ãƒ¼ãƒ æƒ…å ±ã‚¨ãƒªã‚¢ */
        .info-bar {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            font-size: 20px;
            font-weight: bold;
            color: #555;
        }

        /* æ¬¡ã«æŠ¼ã™æ•°å­—ã‚’ç›®ç«‹ãŸã›ã‚‹ */
        #next-target {
            color: #ff5722;
            font-size: 24px;
        }

        /* --- ã“ã“ãŒãƒã‚¤ãƒ³ãƒˆï¼ 5x5ã®ã‚°ãƒªãƒƒãƒ‰ --- */
        #grid-board {
            display: grid;
            grid-template-columns: repeat(5, 1fr); /* 5å›ç¹°ã‚Šè¿”ã™ */
            gap: 8px; /* ãƒœã‚¿ãƒ³åŒå£«ã®ã™ãã¾ */
            margin-bottom: 20px;
        }

        /* æ•°å­—ãƒœã‚¿ãƒ³ã®ãƒ‡ã‚¶ã‚¤ãƒ³ */
        .num-btn {
            aspect-ratio: 1 / 1; /* æ­£æ–¹å½¢ã«ã™ã‚‹ */
            font-size: 24px;
            font-weight: bold;
            background-color: #ffffff;
            border: 2px solid #4dd0e1;
            border-radius: 10px;
            color: #006064;
            cursor: pointer;
            box-shadow: 0 4px #00bcd4;
            transition: transform 0.1s;
            font-family: inherit;
            padding: 0; /* ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°ãƒªã‚»ãƒƒãƒˆ */
        }

        .num-btn:active {
            transform: translateY(2px);
            box-shadow: 0 2px #00bcd4;
        }

        /* æŠ¼ã•ã‚ŒãŸå¾Œã®ã‚¹ã‚¿ã‚¤ãƒ«ï¼ˆå‡¹ã‚“ã§è–„ããªã‚‹ï¼‰ */
        .num-btn.pushed {
            background-color: #e0f7fa;
            border-color: #b2ebf2;
            color: #b2ebf2;
            box-shadow: none;
            transform: translateY(4px);
            pointer-events: none; /* ã‚‚ã†æŠ¼ã›ãªã„ã‚ˆã†ã«ã™ã‚‹ */
        }

        /* ã‚¹ã‚¿ãƒ¼ãƒˆãƒ»ãƒªãƒˆãƒ©ã‚¤ãƒœã‚¿ãƒ³ */
        .start-btn {
            font-size: 24px;
            padding: 15px 40px;
            background: #ff9800;
            color: white;
            border: none;
            border-radius: 50px;
            cursor: pointer;
            box-shadow: 0 5px #e65100;
            margin: 20px 0;
            font-weight: bold;
        }
        .start-btn:active { transform: scale(0.95); box-shadow: 0 2px #e65100; }

        .back-btn {
            background: #90a4ae;
            font-size: 14px;
            padding: 8px 20px;
            color: white;
            border-radius: 20px;
            text-decoration: none;
            display: inline-block;
        }

    </style>
</head>
<body>

<div id="game-container">

    <div id="home-screen" class="screen active">
        <h1>1ã‹ã‚‰25ã¾ã§ ã‚¿ãƒƒãƒï¼</h1>
        <div style="font-size: 80px; margin: 20px;">ğŸ”¢</div>
        <p>1ã‹ã‚‰ ã˜ã‚…ã‚“ã°ã‚“ã«<br>ã™ã†ã˜ã‚’ ãŠã—ã¦ã­ï¼</p>
        <button class="start-btn" onclick="startGame()">ã‚¹ã‚¿ãƒ¼ãƒˆï¼</button>
        <br>
        <a href="index.html" class="back-btn">ğŸ  ã‚‚ã©ã‚‹</a>
    </div>

    <div id="game-screen" class="screen">
        <div class="info-bar">
            <span>ã¤ã: <span id="next-target">1</span></span>
            <span id="timer">0.0ã³ã‚‡ã†</span>
        </div>

        <div id="grid-board">
            </div>

        <a href="index.html" class="back-btn">ğŸ  ã‚„ã‚ã‚‹</a>
    </div>

    <div id="result-screen" class="screen">
        <h1>âœ¨ ã‚¯ãƒªã‚¢ï¼ âœ¨</h1>
        <div style="font-size: 60px;">ğŸ†</div>
        <p>ã‚¿ã‚¤ãƒ ã¯...</p>
        <div id="final-time" style="font-size: 36px; color: #ff5722; font-weight: bold;">0.0ã³ã‚‡ã†</div>
        <button class="start-btn" onclick="startGame()">ã‚‚ã†ã„ã£ã‹ã„ï¼</button>
        <br>
        <a href="index.html" class="back-btn">ğŸ  ã‚‚ã©ã‚‹</a>
    </div>

</div>

<script src="ranking.js"></script>

<script type="module" src="firebase-ranking.js"></script>

<script>
    let currentNumber = 1;
    let startTime;
    let timerInterval;
    const maxNumber = 25;

    // ç”»é¢åˆ‡ã‚Šæ›¿ãˆ
    function changeScreen(id) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById(id).classList.add('active');
    }

    // é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ«
    function shuffle(array) {
        return array.sort(() => Math.random() - 0.5);
    }

    function startGame() {
        currentNumber = 1;
        document.getElementById('next-target').textContent = currentNumber;
        
        // 1ã€œ25ã®æ•°å­—é…åˆ—ã‚’ä½œã£ã¦ã‚·ãƒ£ãƒƒãƒ•ãƒ«
        let numbers = [];
        for (let i = 1; i <= maxNumber; i++) {
            numbers.push(i);
        }
        numbers = shuffle(numbers);

        // ã‚°ãƒªãƒƒãƒ‰ç”Ÿæˆ
        const board = document.getElementById('grid-board');
        board.innerHTML = ''; // ã‚¯ãƒªã‚¢

        numbers.forEach(num => {
            const btn = document.createElement('button');
            btn.className = 'num-btn';
            btn.textContent = num;
            
            // ãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãŸæ™‚ã®å‡¦ç†
            btn.onclick = function() {
                if (num === currentNumber) {
                    // æ­£è§£ã®ã¨ã
                    this.classList.add('pushed'); // è¦‹ãŸç›®ã‚’å¤‰ãˆã‚‹
                    currentNumber++;
                    
                    if (currentNumber > maxNumber) {
                        // ã‚´ãƒ¼ãƒ«ï¼
                        finishGame();
                    } else {
                        // æ¬¡ã®æ•°å­—ã‚’è¡¨ç¤º
                        document.getElementById('next-target').textContent = currentNumber;
                    }
                } else {
                    // é–“é•ã„ã®ã¨ãï¼ˆã¡ã‚‡ã£ã¨æºã‚‰ã™ã¨ã‹ã‚‚ã§ãã¾ã™ãŒä»Šå›ã¯ä½•ã‚‚ã—ãªã„ï¼‰
                }
            };
            board.appendChild(btn);
        });

        changeScreen('game-screen');
        
        // ã‚¿ã‚¤ãƒãƒ¼ã‚¹ã‚¿ãƒ¼ãƒˆ
        startTime = Date.now();
        timerInterval = setInterval(() => {
            const t = ((Date.now() - startTime) / 1000).toFixed(1);
            document.getElementById('timer').textContent = t + "ã³ã‚‡ã†";
        }, 100);
    }

    function finishGame() {
        clearInterval(timerInterval);
        const finalTime = ((Date.now() - startTime) / 1000).toFixed(1);
        document.getElementById('final-time').textContent = finalTime + "ã³ã‚‡ã†";
        changeScreen('result-screen');

        // IDã¯ 'touch25'ã€è¨˜éŒ²ã¯ finalTime (ç§’æ•°) ã§ã™
        if(typeof showSaveDialog === 'function') {
            showSaveDialog('touch25', finalTime);
        }

        
    }
</script>

</body>
</html>