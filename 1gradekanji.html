<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>1ã­ã‚“ã›ã„ ã‹ã‚“ã˜ã‚¯ã‚¤ã‚º</title>
    <script src="ranking.js"></script>
    <style>
        /* --- ãƒ‡ã‚¶ã‚¤ãƒ³è¨­å®š --- */
        body {
            font-family: "UD Digital Kyokasho-tai-R", "UD Digital Kyokasho-tai", "Hiragino Kaku Gothic ProN", "Meiryo", sans-serif;
            background-color: #f0f8ff; /* å„ªã—ã„èƒŒæ™¯è‰² */
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            color: #333;
        }

        .container {
            width: 90%;
            max-width: 600px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 8px 16px rgba(0,0,0,0.1);
            padding: 30px;
            text-align: center;
            position: relative;
        }

        /* ã‚‚ã©ã‚‹ãƒœã‚¿ãƒ³ */
        .home-btn {
            position: absolute;
            top: 20px;
            left: 20px;
            text-decoration: none;
            color: #888;
            font-size: 14px;
            border: 1px solid #ccc;
            padding: 5px 10px;
            border-radius: 15px;
            transition: 0.3s;
        }
        .home-btn:hover {
            background-color: #eee;
        }

        /* å•é¡Œæ–‡ */
        #question-text {
            font-size: 32px;
            margin: 60px 0 40px;
            line-height: 1.6;
            font-weight: bold;
        }

        /* ç©´åŸ‹ã‚éƒ¨åˆ†ã®å¼·èª¿ */
        .blank {
            color: #e67e22; /* ãƒ‘ãƒ‘ãƒ³å¼ã£ã½ã„ã‚ªãƒ¬ãƒ³ã‚¸è‰² */
            text-decoration: underline;
        }

        /* é¸æŠè‚¢ãƒœã‚¿ãƒ³ã®ã‚¨ãƒªã‚¢ */
        .options {
            display: flex;
            gap: 20px;
            justify-content: center;
            flex-wrap: wrap;
        }

        /* é¸æŠè‚¢ãƒœã‚¿ãƒ³ */
        .option-btn {
            background-color: #ffffff;
            border: 3px solid #4CAF50;
            color: #333;
            font-size: 40px; /* æ¼¢å­—ã‚’å¤§ãã */
            padding: 15px 30px;
            border-radius: 15px;
            cursor: pointer;
            transition: all 0.2s;
            min-width: 100px;
            font-family: inherit;
        }

        .option-btn:hover {
            background-color: #4CAF50;
            color: white;
            transform: translateY(-3px);
        }

        .option-btn:active {
            transform: translateY(0);
        }

        /* æ­£è§£ãƒ»ä¸æ­£è§£ã®ã‚¨ãƒ•ã‚§ã‚¯ãƒˆ */
        .feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 150px;
            font-weight: bold;
            display: none;
            pointer-events: none; /* ã‚¯ãƒªãƒƒã‚¯ã‚’é‚ªé­”ã—ãªã„ */
            z-index: 10;
        }
        .correct-mark { color: #ff5252; } /* èŠ±ä¸¸ã®ã‚ˆã†ãªèµ¤ */
        .wrong-mark { color: #555; }

        /* é€²æ—ãƒãƒ¼ */
        .progress {
            margin-top: 30px;
            font-size: 14px;
            color: #888;
        }

        /* çµ‚äº†ç”»é¢ */
        #end-screen {
            display: none;
        }
        .score-text {
            font-size: 24px;
            margin-bottom: 20px;
        }
        .restart-btn {
            background-color: #2196F3;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 18px;
            border-radius: 30px;
            cursor: pointer;
        }

        .btn {
            font-size: 20px; padding: 10px 30px; 
            background: #ff9800; color: white; 
            border: none; border-radius: 30px; 
            margin: 10px; font-weight: bold; cursor: pointer;
        }

        /* ã‚¹ãƒãƒ›å¯¾å¿œ */
        @media (max-width: 480px) {
            #question-text { font-size: 24px; }
            .option-btn { font-size: 32px; padding: 10px 20px; }
        }
    </style>
</head>
<body>

    <div class="container">
        <a href="index.html" class="home-btn">â† ã‚‚ã©ã‚‹</a>

        <div id="quiz-screen">
            <div class="progress">ã‚‚ã‚“ã ã„ <span id="current-count">1</span> / 10</div>
            
            <div id="question-text">ã“ã“ã« ã‚‚ã‚“ã ã„ ãŒ ã§ã‚‹ã‚ˆ</div>
            
            <div id="feedback" class="feedback"></div>

            <div class="options" id="options-container">
                </div>
        </div>

        <div id="end-screen">
            <h2>ãŠã—ã¾ã„ï¼</h2>
            <p class="score-text" id="result-msg">ã‚ˆããŒã‚“ã°ã£ãŸã­ï¼</p>
            <button class="btn" style="background: #ff9800;" 
            onclick="this.disabled=true; this.innerText='ã‚‚ã‚‰ã„ã¾ã—ãŸ'; this.style.background='#ccc'; if(typeof showPointGetDialog==='function'){showPointGetDialog(30)}else{alert('ranking.jsã‚’æ›´æ–°ã—ã¦ã­')}">
            ğŸ ãƒã‚¤ãƒ³ãƒˆã‚’ã‚‚ã‚‰ã†
            </button>
            <button class="restart-btn" onclick="location.reload()">ã‚‚ã†ã„ã¡ã© ã‚„ã‚‹</button>
            <br><br>
            <a href="index.html" class="home-btn" style="position:static; display:inline-block;">ãƒˆãƒƒãƒ—ã¸ã‚‚ã©ã‚‹</a>
        </div>
    </div>

    <script>
        // --- 1. å•é¡Œãƒ‡ãƒ¼ã‚¿ï¼ˆã“ã“ã‚’å¢—ã‚„ã™ã¨ãƒ©ãƒ³ãƒ€ãƒ ã®å¹…ãŒåºƒãŒã‚Šã¾ã™ï¼‰ ---
        // q: å•é¡Œæ–‡ï¼ˆ__ã®éƒ¨åˆ†ãŒç©´åŸ‹ã‚ï¼‰, a: æ­£è§£, dummy: é–“é•ã„ã®é¸æŠè‚¢
        const allQuestions = [
            // --- è‡ªç„¶ãƒ»å¤©æ°— ---
    { q: "ã‚ã•ã«<span class='blank'>__</span> ãŒ ã®ã¼ã‚‹ã€‚", a: "æ—¥", dummy: ["ç™½", "ç›®"] },
    { q: "ã‚ˆã‚‹ã«ã¿ãˆã‚‹ãŠ <span class='blank'>__</span> ã•ã¾ã€‚", a: "æœˆ", dummy: ["ç›®", "å††"] },
    { q: "ãƒ—ãƒ¼ãƒ«ã®<span class='blank'>__</span> ã® ãªã‹ã€‚", a: "æ°´", dummy: ["æ°·", "æœ¨"] },
    { q: "ãŠãŠ <span class='blank'>__</span> ãŒ ãµã‚‹ã€‚", a: "é›¨", dummy: ["å¤©", "ä¸¡"] },
    { q: "ã‚ãŠã„ <span class='blank'>__</span>ã«ç™½ã„ãã‚‚ ã€‚", a: "ç©º", dummy: ["å¤©", "å®¤"] },
    { q: "ãã‚Œã„ãª<span class='blank'>__</span> ãŒ ã•ãã€‚", a: "èŠ±", dummy: ["è‰", "ç«¹"] },
    { q: "<span class='blank'>__</span> ã®ãã¾ã•ã‚“ã€‚", a: "æ£®", dummy: ["æ—", "æœ¨"] },
    { q: "<span class='blank'>__</span> ã‚„ã‘ã“ã‚„ã‘ã€‚", a: "å¤•", dummy: ["å", "å¤š"] },
    { q: "ã«ã‚ã®<span class='blank'>__</span> ã‚’ã¬ãã€‚", a: "è‰", dummy: ["æ—©", "éŸ³"] },
    { q: "ã‚ã—ãŸã®<span class='blank'>__</span> ãã€‚", a: "å¤©", dummy: ["å¤§", "äºº"] },
    
    // --- å­¦æ ¡ãƒ»å‹‰å¼· ---
    { q: "å­¦æ ¡ã®<span class='blank'>__</span> ã›ã„ã€‚", a: "å…ˆ", dummy: ["å¤±", "çŸ¢"] },
    { q: "ã„ã¡ã­ã‚“ <span class='blank'>__</span> ã€‚", a: "ç”Ÿ", dummy: ["æ­£", "ç‹"] },
    { q: "ãƒãƒ¼ãƒˆã«<span class='blank'>__</span> ã‚’ ã‹ãã€‚", a: "å­—", dummy: ["å­¦", "å­"] },
    { q: "<span class='blank'>__</span> ã‚’ ã‚ˆã‚€ã€‚", a: "æœ¬", dummy: ["æœ¨", "å¤§"] },
    { q: "ã•ã <span class='blank'>__</span> ã‚’ ã‹ãã€‚", a: "æ–‡", dummy: ["çˆ¶", "äº¤"] },
    { q: "å‹ã ã¡ã¨<span class='blank'>__</span> ã¾ã‚‹ã€‚", a: "é›†", dummy: ["é€²", "ä½"] }, 
    
    // --- ä½“ãƒ»äºº ---
    { q: "<span class='blank'>__</span> ã§ ã¿ã‚‹ã€‚", a: "ç›®", dummy: ["è€³", "æ—¥"] },
    { q: "<span class='blank'>__</span> ã§ ããã€‚", a: "è€³", dummy: ["ç›®", "æ°—"] },
    { q: "ã˜ã‚…ãã‚‡ã†ã§<span class='blank'>__</span> ã‚’ ã‚ã’ã‚‹ã€‚", a: "æ‰‹", dummy: ["æ¯›", "å¹´"] },
    { q: "ãƒãƒ¼ã‚¿ãƒ¼ã¯<span class='blank'>__</span> ãŒ ã¯ã‚„ã„ã€‚", a: "è¶³", dummy: ["å£", "èµ°"] },
    { q: "ãŠã¨ã“ ã® <span class='blank'>__</span> ã€‚", a: "å­", dummy: ["äº†", "å­—"] },
    { q: "ã‚¸ãƒ£ã‚¤ã‚¢ãƒ³ã¯<span class='blank'>__</span> ã‚‚ã¡ã€‚", a: "åŠ›", dummy: ["åˆ€", "ä¹"] },
    
    // --- æ•°ãƒ»ãŠé‡‘ ---
    { q: "ã„ã¾ã®ã˜ã‹ã‚“ã¯<span class='blank'>__</span> ã˜ã€‚", a: "å››", dummy: ["è¥¿", "çš¿"] },
    { q: "ï¼–ã¤ã‚ˆã‚Šã‚‚ï¼‘ã¤ãŠãŠã„ã®ã¯<span class='blank'>__</span> ã¤ã€‚", a: "ä¸ƒ", dummy: ["ãƒ’", "ä¹"] },
    { q: "ãã‚‡ã†ã¯<span class='blank'>__</span> ã‚ˆã†ã³ã€‚", a: "é‡‘", dummy: ["å…¨", "ä¼š"] },
    { q: "ã¼ãã®ãŠã“ã¥ã‹ã„ã¯<span class='blank'>__</span> ãˆã‚“ã€‚", a: "ç™¾", dummy: ["ç™½", "æ—¥"] },
    { q: "ã‹ã¿ã®ãŠã‹ã­ã§ã„ã¡ã°ã‚“ã¡ã„ã•ã„ã®ã¯ <span class='blank'>__</span> å††ã€‚", a: "åƒ", dummy: ["å¹²", "å"] },
    
    // --- å‹•ããƒ»æ§˜å­ ---
    { q: "ã¸ã‚„ ã« <span class='blank'>__</span> ã‚‹ã€‚", a: "å…¥", dummy: ["äºº", "å…«"] },
    { q: "ãã¨ ã« <span class='blank'>__</span> ã‚‹ã€‚", a: "å‡º", dummy: ["å±±", "ç”°"] },
    { q: "ãã“ã«<span class='blank'>__</span> ã£ã¦ ãã ã•ã„ã€‚", a: "ç«‹", dummy: ["ä½", "éŸ³"] },
    { q: "ã‚†ã£ãã‚Š <span class='blank'>__</span> ã‚€ã€‚", a: "ä¼‘", dummy: ["ä½“", "æœ¨"] },
    { q: "ã¯ã‚„ã <span class='blank'>__</span> ã‚‹ã€‚", a: "èµ°", dummy: ["è¶³", "èµ¤"] },
    { q: "<span class='blank'>__</span> ãã„ ã“ãˆã€‚", a: "å¤§", dummy: ["çŠ¬", "å¤©"] },
    { q: "<span class='blank'>__</span> ã•ã„ ã‚¢ãƒªã€‚", a: "å°", dummy: ["å°‘", "å±±"] },
    { q: "<span class='blank'>__</span> ãã¦ ã¾ã‚‹ã„ã€‚", a: "ç™½", dummy: ["ç™¾", "æ—¥"] },
    { q: "ã¨ã¾ã‚Œã¯<span class='blank'>__</span> ã—ã‚“ã”ã†ã€‚", a: "èµ¤", dummy: ["é’", "èµ°"] },
    { q: "ãƒ†ãƒ¼ãƒ–ãƒ«ã®ã†ãˆã«<span class='blank'>__</span> ã¤ã®ã¯ãƒ€ãƒ¡ã€‚", a: "ç«‹", dummy: ["å…­", "éŸ³"] },
    { q: "ãƒ‘ã‚¹ã‚¿ã«ã¯ã„ã£ãŸ<span class='blank'>__</span> ã‚’ãŸã¹ã‚‹ã€‚", a: "è²", dummy: ["ç›®", "å…­"] },
    
    // --- ä½ç½®ãƒ»ãã®ä»– ---
    { q: "ã¨ã‘ã„ã§ï¼“ãŒã‚ã‚‹ã®ã¯<span class='blank'>__</span> ãŒã‚ã€‚", a: "å³", dummy: ["å·¦", "çŸ³"] },
    { q: "ã¨ã‘ã„ã§ï¼™ãŒã‚ã‚‹ã®ã¯<span class='blank'>__</span> ãŒã‚ã€‚", a: "å·¦", dummy: ["å³", "çŸ³"] },
    { q: "ãã‚‰ã‚’ã¿ã‚‹ãŸã‚ã«<span class='blank'>__</span> ã‚’ ã‚€ãã€‚", a: "ä¸Š", dummy: ["ä¸‹", "æ­¢"] },
    { q: " <span class='blank'>__</span>ã«ã®ã‚‹ ã€‚", a: "è»Š", dummy: ["æ±", "äº‹"] },
    { q: "<span class='blank'>__</span> ã•ã¾ã«ãªã‚‹ã€‚", a: "ç‹", dummy: ["ç‰", "ä¸»"] },
    { q: "<span class='blank'>__</span> ã‚’ ã‹ã†ã€‚", a: "çŠ¬", dummy: ["å¤§", "å¤ª"] },
    { q: "ãƒœãƒ¼ã¡ã‚ƒã‚“ãŒã™ããªã®ã¯<span class='blank'>__</span> ã€‚", a: "çŸ³", dummy: ["å³", "å²©"] },
    { q: "ãƒ‰ãƒ©ãˆã‚‚ã‚“ã®<span class='blank'>__</span>ãŒããŒã™ã ã€‚", a: "éŸ³", dummy: ["æ—¥", "å²©"] },
    { q: "æ—ã§<span class='blank'>__</span> ã‚’ ã¨ã‚‹ã€‚", a: "è™«", dummy: ["ä¸­", "å¿ "] }
        ];

        // --- 2. å¤‰æ•°è¨­å®š ---
        let quizList = [];
        let currentQuestionIndex = 0;
        const maxQuestions = 10; // å‡ºé¡Œæ•°

        // --- 3. èµ·å‹•æ™‚ã®å‡¦ç† ---
        window.onload = function() {
            initQuiz();
        };

        function initQuiz() {
            // å•é¡Œã‚’ã‚·ãƒ£ãƒƒãƒ•ãƒ«ã—ã¦å…ˆé ­10å•ã‚’å–å¾—
            quizList = shuffleArray([...allQuestions]).slice(0, maxQuestions);
            currentQuestionIndex = 0;
            showQuestion();
        }

        // --- 4. å•é¡Œè¡¨ç¤º ---
        function showQuestion() {
            const qData = quizList[currentQuestionIndex];
            
            // é€²æ—è¡¨ç¤º
            document.getElementById('current-count').textContent = currentQuestionIndex + 1;
            
            // å•é¡Œæ–‡è¡¨ç¤º
            document.getElementById('question-text').innerHTML = qData.q;

            // é¸æŠè‚¢ã®æº–å‚™ï¼ˆæ­£è§£ã¨ãƒ€ãƒŸãƒ¼ã‚’æ··ãœã‚‹ï¼‰
            let options = [qData.a, ...qData.dummy];
            options = shuffleArray(options);

            // ãƒœã‚¿ãƒ³ç”Ÿæˆ
            const container = document.getElementById('options-container');
            container.innerHTML = ""; // å‰ã®ãƒœã‚¿ãƒ³ã‚’æ¶ˆã™

            options.forEach(opt => {
                const btn = document.createElement('button');
                btn.className = 'option-btn';
                btn.textContent = opt;
                btn.onclick = () => checkAnswer(opt, qData.a);
                container.appendChild(btn);
            });
        }

        // --- 5. æ­£èª¤åˆ¤å®š ---
        function checkAnswer(selected, correct) {
            const feedback = document.getElementById('feedback');
            
            if (selected === correct) {
                // æ­£è§£ã®å‡¦ç†
                feedback.textContent = "â—";
                feedback.className = "feedback correct-mark";
                feedback.style.display = "block";
                
                // ãƒœã‚¿ãƒ³ã‚’æŠ¼ã›ãªãã™ã‚‹ï¼ˆé€£æ‰“é˜²æ­¢ï¼‰
                disableButtons();

                // 0.8ç§’å¾Œã«æ¬¡ã®å•é¡Œã¸
                setTimeout(() => {
                    feedback.style.display = "none";
                    nextQuestion();
                }, 800);

            } else {
                // ä¸æ­£è§£ã®å‡¦ç†
                feedback.textContent = "Ã—";
                feedback.className = "feedback wrong-mark";
                feedback.style.display = "block";
                
                // 0.5ç§’ã ã‘ãƒãƒ„ã‚’å‡ºã—ã¦æ¶ˆã™ï¼ˆå†æŒ‘æˆ¦ã•ã›ã‚‹ï¼‰
                setTimeout(() => {
                    feedback.style.display = "none";
                }, 500);
            }
        }

        function disableButtons() {
            const btns = document.querySelectorAll('.option-btn');
            btns.forEach(btn => btn.disabled = true);
        }

        function nextQuestion() {
            currentQuestionIndex++;
            if (currentQuestionIndex < maxQuestions) {
                showQuestion();
            } else {
                showResult();
            }
        }

        // --- 6. çµæœç”»é¢ ---
        function showResult() {
            document.getElementById('quiz-screen').style.display = 'none';
            document.getElementById('end-screen').style.display = 'block';
        }

        // --- ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£: é…åˆ—ã‚·ãƒ£ãƒƒãƒ•ãƒ« ---
        function shuffleArray(array) {
            for (let i = array.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [array[i], array[j]] = [array[j], array[i]];
            }
            return array;
        }
    </script>
</body>
</html>