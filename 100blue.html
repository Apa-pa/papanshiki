<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚º - é’è‰²ï¼ˆã‚ãŠï¼‰</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            /* ç¸¦ä¸¦ã³ */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            /* ä¸Šä¸‹ã«å°‘ã—ä½™ç™½ã‚’è¿½åŠ  */
        }

        #quiz-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        h1 {
            color: #e67e22;
            font-size: 1.5em;
        }

        #question-num {
            font-weight: bold;
            color: #666;
        }

        #upper-phrase {
            font-size: 1.3em;
            margin: 20px 0;
            min-height: 3em;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.5;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #f39c12;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: 0.2s;
        }

        .option-btn:hover {
            background: #f39c12;
            color: white;
        }

        #result-area {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.2em;
            min-height: 1.5em;
        }

        .correct {
            color: #27ae60;
        }

        .incorrect {
            color: #e74c3c;
        }

        button:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        #next-btn {
            margin-top: 20px;
            padding: 10px 25px;
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>

<body>

    <div id="quiz-card">
        <h1>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚ºã€ã‚ãŠã€‘</h1>
        <p id="question-num">ç¬¬ 1 å• / 10</p>
        <div id="upper-phrase">ä¸Šã®å¥ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        <div id="options"></div>
        <div id="result-area"></div>
        <button id="next-btn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <a href="index.html" style="
        display: inline-block;
        padding: 10px 25px;
        background-color: #ff9d00;
        color: white;
        text-decoration: none;
        border-radius: 25px;
        box-shadow: 0 4px #e68a00;
        font-weight: bold;
        transition: 0.2s;
    ">ğŸ  ãƒ›ãƒ¼ãƒ ã«ã‚‚ã©ã‚‹</a>
    </div>

    <script>
        // CSVã‹ã‚‰æŠ½å‡ºã—ãŸã€Œã ã„ã ã„è‰²ã€ã®å³å¯†ãª20é¦–ãƒ‡ãƒ¼ã‚¿
        const allData = [
            { no: 3, u: "ã‚ã—ã³ãã® ã‚„ã¾ã©ã‚Šã®ãŠã® ã—ã ã‚ŠãŠã®", l: "ãªãŒãªãŒã—ã‚ˆã‚’ ã²ã¨ã‚Šã‹ã‚‚ã­ã‚“" },
            { no: 5, u: "ãŠãã‚„ã¾ã« ã‚‚ã¿ã˜ãµã¿ã‚ã‘ ãªãã—ã‹ã®", l: "ã“ãˆããã¨ãã ã‚ãã‚ã‹ãªã—ã" },
            { no: 6, u: "ã‹ã•ã•ãã® ã‚ãŸã›ã‚‹ã¯ã—ã« ãŠãã—ã‚‚ã®", l: "ã—ã‚ãã‚’ã¿ã‚Œã° ã‚ˆããµã‘ã«ã‘ã‚‹" },
            { no: 12, u: "ã‚ã¾ã¤ã‹ãœ ãã‚‚ã®ã‹ã‚ˆã„ã˜ ãµãã¨ã˜ã‚ˆ", l: "ãŠã¨ã‚ã®ã™ãŒãŸ ã—ã°ã—ã¨ã©ã‚ã‚“" },
            { no: 14, u: "ã¿ã¡ã®ãã® ã—ã®ã¶ã‚‚ã˜ãšã‚Š ãŸã‚Œã‚†ãˆã«", l: "ã¿ã ã‚Œãã‚ã«ã— ã‚ã‚Œãªã‚‰ãªãã«" },
            { no: 24, u: "ã“ã®ãŸã³ã‚ ã¬ã•ã‚‚ã¨ã‚Šã‚ãˆãš ãŸã‚€ã‘ã‚„ã¾", l: "ã‚‚ã¿ã˜ã®ã«ã—ã ã‹ã¿ã®ã¾ã«ã¾ã«" },
            { no: 30, u: "ã‚ã‚Šã‚ã‘ã® ã¤ã‚Œãªãã¿ãˆã— ã‚ã‹ã‚Œã‚ˆã‚Š", l: "ã‚ã‹ã¤ãã°ã‹ã‚Š ã†ãã‚‚ã®ã‚ãªã—" },
            { no: 31, u: "ã‚ã•ã¼ã‚‰ã‘ ã‚ã‚Šã‚ã‘ã®ã¤ãã¨ ã¿ã‚‹ã¾ã§ã«", l: "ã‚ˆã—ã®ã®ã•ã¨ã« ãµã‚Œã‚‹ã—ã‚‰ã‚†ã" },
            { no: 50, u: "ãã¿ãŒãŸã‚ ãŠã—ã‹ã‚‰ã–ã‚Šã— ã„ã®ã¡ã•ãˆ", l: "ãªãŒãã‚‚ãŒãªã¨ ãŠã‚‚ã„ã‘ã‚‹ã‹ãª" },
            { no: 57, u: "ã‚ãã‚Šã‚ã„ã¦ ã¿ã—ã‚„ãã‚Œã¨ã‚‚ ã‚ã‹ã¬ã¾ã«", l: "ãã‚‚ãŒãã‚Œã«ã— ã‚ˆã‚ã®ã¤ãã‹ãª" },
            { no: 61, u: "ã„ã«ã—ãˆã® ãªã‚‰ã®ã¿ã‚„ã“ã® ã‚„ãˆã–ãã‚‰", l: "ãã‚‡ãƒ¼ã“ã“ã®ãˆã« ã«ãŠã„ã¬ã‚‹ã‹ãª" },
            { no: 62, u: "ã‚ˆ(ãŠ)ã“ã‚ã¦ ã¨ã‚Šã®ãã‚‰ã­ã‚ ã¯ã‹ã‚‹ã¨ã‚‚", l: "ã‚ˆã«ãŠãƒ¼ã•ã‹ã® ã›ãã‚ã‚†ã‚‹ã•ã˜" },
            { no: 69, u: "ã‚ã‚‰ã—ãµã ã¿ã‚€ã‚ã®ã‚„ã¾ã® ã‚‚ã¿ã˜ã°ã‚", l: "ãŸã¤ãŸã®ã‹ã‚ã® ã«ã—ããªã‚Šã‘ã‚Š" },
            { no: 70, u: "ã•ã³ã—ã•ã« ã‚„ã©ã‚’ãŸã¡ã„ã§ã¦ ãªãŒã‚€ã‚Œã°", l: "ã„ãšã“ã‚‚ãŠãªã˜ ã‚ãã®ã‚†ãƒ¼ãã‚Œ" },
            { no: 74, u: "ã†ã‹ã‚Šã‘ã‚‹ ã²ã¨ã‚’ã¯ã¤ã›ã® ã‚„ã¾ãŠã‚ã—", l: "ã¯ã’ã—ã‹ã‚Œã¨ã‚ ã„ã®ã‚‰ã¬ã‚‚ã®ã‚’" },
            { no: 75, u: "ã¡ãã‚ŠãŠãã— ã•ã›ã‚‚ãŒã¤ã‚†ã‚’ ã„ã®ã¡ã«ã¦", l: "ã‚ã‚ã‚Œã“ã¨ã—ã® ã‚ãã‚‚ã„ã¬ã‚ã‚Š" },
            { no: 76, u: "ã‚ãŸã®ã¯ã‚‰ ã“ãã„ã§ã¦ã¿ã‚Œã° ã²ã•ã‹ãŸã®", l: "ãã‚‚ã„ã«ã¾ã”ãƒ¼ ãŠãã¤ã—ã‚‰ãªã¿" },
            { no: 82, u: "ãŠã‚‚ã„ã‚ã³ ã•ã¦ã‚‚ã„ã®ã¡ã‚ ã‚ã‚‹ã‚‚ã®ã‚’", l: "ã†ãã«ãŸãˆã¬ã‚ ãªã¿ã ãªã‚Šã‘ã‚Š" },
            { no: 91, u: "ãã‚Šãã‚Šã™ ãªãã‚„ã—ã‚‚ã‚ˆã® ã•ã‚€ã—ã‚ã«", l: "ã“ã‚ã‚‚ã‹ãŸã—ã ã²ã¨ã‚Šã‹ã‚‚ã­ã‚“" },
            { no: 100, u: "ã‚‚ã‚‚ã—ãã‚„ ãµã‚‹ãã®ãã°ã® ã—ã®ã¶ã«ã‚‚", l: "ãªãŠã‚ã¾ã‚Šã‚ã‚‹ ã‚€ã‹ã—ãªã‚Šã‘ã‚Š" },

        ];

        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let wrongQuestions = []; // é–“é•ãˆãŸå•é¡Œã‚’ä¿å­˜ã™ã‚‹é…åˆ—
        let isReviewMode = false; // ä»ŠãŒå¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹

        function initQuiz() {
            isReviewMode = false;
            wrongQuestions = [];
            score = 0;
            currentIndex = 0;
            // æœ€åˆã¯ãƒ©ãƒ³ãƒ€ãƒ ã«10å•é¸ã¶
            currentQuestions = [...allData].sort(() => 0.5 - Math.random()).slice(0, 10);
            showQuestion();
        }

        function showQuestion() {
            const q = currentQuestions[currentIndex];
            const titlePrefix = isReviewMode ? "ã€å¾©ç¿’ã€‘" : "";
            document.getElementById("question-num").innerText = `${titlePrefix}ç¬¬ ${currentIndex + 1} å• / ${currentQuestions.length}`;
            document.getElementById("upper-phrase").innerText = q.u;
            document.getElementById("result-area").innerText = "";
            document.getElementById("next-btn").style.display = "none";

            let options = [q.l];
            let others = allData.filter(d => d.l !== q.l).sort(() => 0.5 - Math.random());
            options.push(others[0].l, others[1].l);
            options.sort(() => 0.5 - Math.random());

            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = "";
            options.forEach(opt => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, q.l, q);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct, questionObj) {
            const resultArea = document.getElementById("result-area");
            const btns = document.getElementsByClassName("option-btn");
            for (let btn of btns) btn.disabled = true;

            if (selected === correct) {
                resultArea.innerHTML = "<span class='correct'>æ­£è§£ï¼</span>";
                if (!isReviewMode) score++;
            } else {
                resultArea.innerHTML = `<span class='incorrect'>æ®‹å¿µï¼æ­£è§£ã¯ï¼š<br>${correct}</span>`;
                // é–“é•ãˆãŸå•é¡Œã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼ˆé‡è¤‡ã—ãªã„ã‚ˆã†ã«ï¼‰
                if (!wrongQuestions.includes(questionObj)) {
                    wrongQuestions.push(questionObj);
                }
            }
            document.getElementById("next-btn").style.display = "inline-block";
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            if (wrongQuestions.length > 0) {
                if (confirm(`çµ‚äº†ï¼ã‚¹ã‚³ã‚¢: ${score}/10\né–“é•ãˆãŸ ${wrongQuestions.length} å•ã‚’å¾©ç¿’ã—ã¾ã™ã‹ï¼Ÿ`)) {
                    startReview();
                } else {
                    initQuiz();
                }
            } else {
                // alert(`å…¨å•æ­£è§£ã§ã™ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼`);
                // initQuiz();
                showPointGetDialog(50, () => { location.href = '100home.html'; });
            }
        }

        function startReview() {
            isReviewMode = true;
            currentQuestions = [...wrongQuestions]; // é–“é•ãˆãŸå•é¡Œã ã‘ã§ãƒªã‚¹ãƒˆã‚’ä½œæˆ
            wrongQuestions = []; // å¾©ç¿’ä¸­ã«ã¾ãŸé–“é•ãˆãŸæ™‚ã®ãŸã‚ã«ãƒªã‚»ãƒƒãƒˆ
            currentIndex = 0;
            showQuestion();
        }

        initQuiz();
    </script>

    <script src="ranking.js"></script>
</body>

</html>