<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å˜åˆ©ã¨è¤‡åˆ©ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ | ã±ã±ã‚“å¼</title>
    <script src="ranking.js"></script>
    <style>
        body {
            font-family: "UD Digital Kyokasho-tai-R", sans-serif;
            background-color: #e0f2f1; /* ãŠé‡‘ã£ã½ã„è–„ç·‘ */
            text-align: center;
            padding: 20px;
            margin: 0;
            color: #004d40;
            touch-action: manipulation;
        }

        .container {
            max-width: 700px;
            margin: 0 auto;
            background: white;
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        }

        h1 { margin: 0 0 20px 0; color: #00897b; font-size: 28px; }
        h2 { font-size: 20px; margin-top: 30px; color: #00695c; border-bottom: 2px solid #b2dfdb; padding-bottom: 5px; display: inline-block;}

        /* è§£èª¬ã‚¨ãƒªã‚¢ */
        .explanation-grid {
            display: flex;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        .card {
            flex: 1;
            min-width: 280px;
            background: #f1f8e9;
            padding: 15px;
            border-radius: 15px;
            border: 2px solid #c5e1a5;
            text-align: left;
        }
        .card-title {
            font-weight: bold; font-size: 18px; color: #33691e; margin-bottom: 10px; text-align: center;
        }
        .card p { font-size: 14px; line-height: 1.6; margin: 0; }
        .keyword { font-weight: bold; color: #e65100; }

        /* ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼ã‚¨ãƒªã‚¢ */
        .simulator-box {
            background: #e0f7fa;
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid #80deea;
        }

        .input-group {
            margin-bottom: 15px;
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 10px;
            flex-wrap: wrap;
        }
        
        label { font-weight: bold; }
        
        input[type="number"] {
            font-size: 18px; padding: 8px; border-radius: 8px;
            border: 2px solid #00acc1; width: 120px; text-align: right;
            font-family: inherit;
        }

        .range-wrap {
            width: 100%; max-width: 400px; margin: 0 auto 10px;
        }
        input[type="range"] { width: 100%; cursor: pointer; }

        /* ã‚°ãƒ©ãƒ•è¡¨ç¤ºã‚¨ãƒªã‚¢ */
        .graph-area {
            margin-top: 50px;
            position: relative;
            height: 300px;
            border-left: 2px solid #555;
            border-bottom: 2px solid #555;
            display: flex;
            justify-content: space-around;
            padding-bottom: 0;
        }

        .bar-group {
            width: 30%;
            height: 100%;
            display: flex;
            flex-direction: column;
            justify-content: flex-end;
            align-items: center;
            position: relative;
        }

        /* æ£’ã‚°ãƒ©ãƒ•å…¨ä½“æ  */
        .bar-wrapper {
            width: 100%;
            border-radius: 5px 5px 0 0;
            transition: height 0.5s ease-out;
            min-height: 2px;
            display: flex;
            flex-direction: column-reverse; /* ä¸‹ã‹ã‚‰ç©ã¿ä¸Šã’ */
            overflow: hidden; /* è§’ä¸¸ã®ãŸã‚ */
        }

        /* æ£’ã‚°ãƒ©ãƒ•ã®ä¸­èº«ï¼ˆå…ƒæœ¬ãƒ»åˆ©ç›Šï¼‰ */
        .part-principal {
            width: 100%;
            background: #a5d6a7; /* å…ƒæœ¬ã®è‰²ï¼ˆç·‘ï¼‰ */
            border-top: 1px solid rgba(255,255,255,0.5);
            transition: height 0.5s ease-out;
            display: flex; justify-content: center; align-items: center;
            font-size: 12px; color: #1b5e20;
        }
        
        .part-interest {
            width: 100%;
            transition: height 0.5s ease-out;
            display: flex; justify-content: center; align-items: center;
            font-size: 12px; color: rgba(0,0,0,0.6);
        }
        
        .simple-interest { background: #90a4ae; } /* å˜åˆ©ã®åˆ©ç›Šï¼ˆã‚°ãƒ¬ãƒ¼é’ï¼‰ */
        .compound-interest { background: #ffca28; box-shadow: 0 0 15px rgba(255, 202, 40, 0.4); } /* è¤‡åˆ©ã®åˆ©ç›Šï¼ˆã‚ªãƒ¬ãƒ³ã‚¸ï¼‰ */

        .bar-label {
            margin-bottom: 5px;
            font-weight: bold;
            font-size: 16px;
            width: 200%;
            text-align: center;
        }

        .bar-name {
            margin-top: 10px; font-weight: bold; height: 20px;
        }

        /* çµæœãƒ†ã‚­ã‚¹ãƒˆ */
        .result-text {
            font-size: 18px; margin-top: 20px; font-weight: bold;
        }
        .diff { color: #e65100; font-size: 22px; }

        /* ã‚³ãƒ©ãƒ ã‚¨ãƒªã‚¢ */
        .column-box {
            margin-top: 40px;
            background: #fff3e0;
            border: 2px dashed #ffb74d;
            border-radius: 15px;
            padding: 20px;
            text-align: left;
        }
        .column-title {
            font-weight: bold; color: #ef6c00; font-size: 18px; margin-bottom: 10px;
        }
        .column-content {
            font-size: 15px; line-height: 1.8;
        }

        .back-link { display: inline-block; margin-top: 40px; color: #00897b; text-decoration: underline; }

    </style>
</head>
<body>

<div class="container">
    <h1>ğŸ’° å˜åˆ©ã¨è¤‡åˆ©ï¼ˆãŸã‚“ã‚Šã¨ãµãã‚Šï¼‰</h1>

    <div class="explanation-grid">
        <div class="card">
            <div class="card-title">ğŸ˜ å˜åˆ©ï¼ˆãŸã‚“ã‚Šï¼‰ã¨ã¯ï¼Ÿ</div>
            <p>
                ã•ã„ã—ã‚‡ã«é ã‘ãŸãŠé‡‘ï¼ˆå…ƒæœ¬ï¼‰ã«ã ã‘ã€åˆ©å­ãŒã¤ãã¾ã™ã€‚<br>
                å…ƒæœ¬ã¯ãšã£ã¨å¤‰ã‚ã‚‰ãªã„ã®ã§ã€å¢—ãˆæ–¹ã¯ä¸€å®šã§ã™ã€‚<br>
                <span style="color:#1b5e20; font-weight:bold;">â–  ç·‘è‰²ã®éƒ¨åˆ†</span> ï¼ å…ƒæœ¬<br>
                <span style="color:#546e7a; font-weight:bold;">â–  é’è‰²ã®éƒ¨åˆ†</span> ï¼ å¢—ãˆãŸåˆ†
            </p>
        </div>
        <div class="card" style="background:#fff8e1; border-color:#ffe082;">
            <div class="card-title">ğŸ¤© è¤‡åˆ©ï¼ˆãµãã‚Šï¼‰ã¨ã¯ï¼Ÿ</div>
            <p>
                å¢—ãˆãŸãŠé‡‘ã‚‚åˆä½“ã—ã¦ã€ã•ã‚‰ã«åˆ©å­ã‚’ç”Ÿã¿ã¾ã™ã€‚<br>
                ã€ŒãŠé‡‘ãŒå­ã©ã‚‚ã‚’ç”£ã‚“ã§ã€ãã®å­ã©ã‚‚ã‚‚å­ã©ã‚‚ã‚’ç”£ã‚€ã€ã‚¤ãƒ¡ãƒ¼ã‚¸ã§ã™ã€‚<br>
                <span style="color:#f57f17; font-weight:bold;">â–  é»„è‰²ã®éƒ¨åˆ†</span> ãŒã©ã‚“ã©ã‚“è‚²ã¡ã¾ã™ï¼
            </p>
        </div>
    </div>

    <h2>ğŸ“ˆ ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚¿ãƒ¼</h2>
    <p>æ•°å­—ã‚’å¤‰ãˆã¦ã€ã©ã‚Œãã‚‰ã„å·®ãŒå‡ºã‚‹ã‹è¦‹ã¦ã¿ã‚ˆã†ï¼<br>(è¿½åŠ æŠ•è³‡ãªã—ãƒ»ç¨é‡‘ã¯è€ƒãˆãªã„)</p>

    <div class="simulator-box">
        <div class="input-group">
            <label>ã•ã„ã—ã‚‡ã®ãŠé‡‘ï¼š</label>
            <input type="number" id="principal" value="1000000" step="10000" oninput="calc()"> å††
        </div>

        <div class="input-group">
            <label>åˆ©å›ã‚Šï¼ˆï¼…ï¼‰ï¼š</label>
            <input type="number" id="rate" value="5" step="0.1" min="0.1" max="20" oninput="updateRange('rate', this.value); calc()"> %
        </div>
        <div class="range-wrap">
            <input type="range" id="rate-range" min="0.1" max="20" step="0.1" value="5" oninput="updateInput('rate', this.value); calc()">
        </div>

        <div class="input-group">
            <label>æœŸé–“ï¼ˆå¹´ï¼‰ï¼š</label>
            <input type="number" id="years" value="20" min="1" max="50" oninput="updateRange('years', this.value); calc()"> å¹´
        </div>
        <div class="range-wrap">
            <input type="range" id="years-range" min="1" max="50" step="1" value="20" oninput="updateInput('years', this.value); calc()">
        </div>

        <div class="graph-area" id="graph-area">
            <div class="bar-group">
                <div class="bar-label" id="val-simple">0å††</div>
                <div class="bar-wrapper" id="bar-simple-wrapper" style="height: 50%;">
                    <div class="part-interest simple-interest" id="part-simple-interest">åˆ©å­</div>
                    <div class="part-principal" id="part-simple-principal">å…ƒæœ¬</div>
                </div>
                <div class="bar-name">å˜åˆ©</div>
            </div>

            <div class="bar-group">
                <div class="bar-label" id="val-compound" style="color:#e65100;">0å††</div>
                <div class="bar-wrapper" id="bar-compound-wrapper" style="height: 80%;">
                    <div class="part-interest compound-interest" id="part-compound-interest">åˆ©å­</div>
                    <div class="part-principal" id="part-compound-principal">å…ƒæœ¬</div>
                </div>
                <div class="bar-name" style="color:#e65100;">è¤‡åˆ©</div>
            </div>
        </div>

        <div class="result-text">
            å·®é¡ï¼ˆã•ãŒãï¼‰ï¼š <span id="val-diff" class="diff">0</span> å††
            <div style="font-size:14px; font-weight:normal; margin-top:5px;">
                è¤‡åˆ©ã®ã»ã†ãŒã€ã“ã‚“ãªã«ãŠãƒˆã‚¯ï¼
            </div>
        </div>
    </div>

    <div class="column-box">
        <div class="column-title">ğŸ’¡ ã±ã±ã‚“è¨¼åˆ¸ã®ãƒ’ãƒŸãƒ„</div>
        <div class="column-content">
            <p>
                ç¾å®Ÿã®ä¸–ç•Œã§ã¯å¹´ã«æ•°%ã®åˆ©å›ã‚Šã ã‘ã©ã€<strong>ã±ã±ã‚“è¨¼åˆ¸</strong>ã®æ ªã¯ä¸€æ—¥ã«1å›é…å½“ï¼ˆã¯ã„ã¨ã†ï¼‰ãŒã‚‚ã‚‰ãˆã‚‹ã‚ˆï¼
            </p>
            <p>
                ãŸã¨ãˆã°ã€<strong>500ãƒã‚¤ãƒ³ãƒˆ</strong>ã§ã€Œæ¯æ—¥é…å½“3%ã€ã®æ ªã‚’ï¼‘ã¤è²·ã£ã¦ãŠãã¨ã€<br>
                100æ—¥ã§ <strong style="color:#e65100; font-size:1.2em;">1,500ãƒã‚¤ãƒ³ãƒˆ</strong> ã‚‚é…å½“ãŒã‚‚ã‚‰ãˆã‚‹ã‚“ã ã‚ˆã€‚
                <br><span style="font-size:0.9em; color:#666;">ï¼ˆâ€»ã‚‚ã‚‰ã£ãŸãƒã‚¤ãƒ³ãƒˆã‚’ä½¿ã‚ãšã«è²¯ã‚ãŸå ´åˆï¼‰</span>
            </p>
            <p>
                ã‚‚ã—ã€ãã®å¢—ãˆãŸãƒã‚¤ãƒ³ãƒˆã§<strong>ã€Œã¾ãŸæ ªã‚’è²·ã£ãŸã‚‰ã€</strong>ãƒ»ãƒ»ãƒ»ï¼Ÿ<br>
                ãã‚ŒãŒ<strong>è¤‡åˆ©ï¼ˆãµãã‚Šï¼‰ã®åŠ›</strong>ã§ã€é›ªã ã‚‹ã¾å¼ã«ã©ã‚“ã©ã‚“å¢—ãˆã¦ã„ãã‚“ã ã‚ˆï¼
            </p>
            <p>
                å®Ÿã¯ã“ã‚Œã€é«˜æ ¡ç”Ÿã®ãŠå…„ã•ã‚“ãƒ»ãŠå§‰ã•ã‚“ãŒç¿’ã†ã“ã¨ãªã‚“ã ã‚ˆã€‚ãã‚Œã‚’ä»ŠçŸ¥ã£ã¦ã‚‹ã‚­ãƒŸã¯ã™ã”ã„ï¼
            </p>
        </div>
    </div>

    <a href="index.html" class="back-link">ğŸ  ãƒ›ãƒ¼ãƒ ã¸ã‚‚ã©ã‚‹</a>
</div>

<script>
    function updateInput(id, val) {
        document.getElementById(id).value = val;
    }
    function updateRange(id, val) {
        document.getElementById(id + '-range').value = val;
    }

    function calc() {
        const principal = parseFloat(document.getElementById('principal').value);
        const rate = parseFloat(document.getElementById('rate').value) / 100;
        const years = parseFloat(document.getElementById('years').value);

        if (isNaN(principal) || isNaN(rate) || isNaN(years)) return;

        // è¨ˆç®—
        // å˜åˆ©: å…ƒæœ¬ * (1 + å¹´åˆ© * å¹´æ•°)
        const simpleTotal = Math.floor(principal * (1 + rate * years));
        
        // è¤‡åˆ©: å…ƒæœ¬ * (1 + å¹´åˆ©)^å¹´æ•°
        const compoundTotal = Math.floor(principal * Math.pow((1 + rate), years));

        const diff = compoundTotal - simpleTotal;

        // è¡¨ç¤ºæ›´æ–°
        document.getElementById('val-simple').innerText = simpleTotal.toLocaleString();
        document.getElementById('val-compound').innerText = compoundTotal.toLocaleString();
        document.getElementById('val-diff').innerText = diff.toLocaleString();

        // ã‚°ãƒ©ãƒ•ã®é«˜ã•è¨ˆç®—
        // compoundTotalã‚’åŸºæº–(90%)ã«ã—ã¦é«˜ã•ã‚’æ±ºã‚ã‚‹
        let maxVal = compoundTotal;
        if (maxVal === 0) maxVal = 1;

        const hSimpleTotal = Math.max((simpleTotal / maxVal) * 90, 2); 
        const hCompoundTotal = Math.max((compoundTotal / maxVal) * 90, 2);

        document.getElementById('bar-simple-wrapper').style.height = hSimpleTotal + '%';
        document.getElementById('bar-compound-wrapper').style.height = hCompoundTotal + '%';

        // å†…éƒ¨ã®æ¯”ç‡è¨ˆç®—ï¼ˆå…ƒæœ¬ vs åˆ©ç›Šï¼‰
        // å˜åˆ©ãƒãƒ¼ã®ä¸­èº«
        const simpleInterestVal = simpleTotal - principal;
        const simplePrincipalRate = (principal / simpleTotal) * 100;
        const simpleInterestRate = (simpleInterestVal / simpleTotal) * 100;
        
        document.getElementById('part-simple-principal').style.height = simplePrincipalRate + '%';
        document.getElementById('part-simple-interest').style.height = simpleInterestRate + '%';
        
        // è¤‡åˆ©ãƒãƒ¼ã®ä¸­èº«
        const compoundInterestVal = compoundTotal - principal;
        const compoundPrincipalRate = (principal / compoundTotal) * 100;
        const compoundInterestRate = (compoundInterestVal / compoundTotal) * 100;

        document.getElementById('part-compound-principal').style.height = compoundPrincipalRate + '%';
        document.getElementById('part-compound-interest').style.height = compoundInterestRate + '%';

        // æ–‡å­—ã‚’å…¥ã‚Œã‚‹ã‹ã©ã†ã‹ã®èª¿æ•´ï¼ˆç‹­ã™ãã‚‹ã¨æ–‡å­—ãŒã¯ã¿å‡ºã‚‹ã®ã§æ¶ˆã™ï¼‰
        const hideTextThreshold = 10; // 10%ä»¥ä¸‹ãªã‚‰æ–‡å­—æ¶ˆã™
        document.getElementById('part-simple-interest').innerText = simpleInterestRate > hideTextThreshold ? 'åˆ©å­' : '';
        document.getElementById('part-compound-interest').innerText = compoundInterestRate > hideTextThreshold ? 'åˆ©å­' : '';
    }

    // åˆæœŸè¡¨ç¤º
    window.onload = calc;
</script>

</body>
</html>