<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="UTF-8">
    <title>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚º - æ¡ƒè‰²ï¼ˆãƒ”ãƒ³ã‚¯ï¼‰</title>
    <style>
        body {
            font-family: 'Helvetica Neue', Arial, sans-serif;
            background-color: #f0f4f8;
            display: flex;
            flex-direction: column;
            /* ç¸¦ä¸¦ã³ */
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 20px 0;
            /* ä¸Šä¸‹ã«å°‘ã—ä½™ç™½ã‚’è¿½åŠ  */
        }

        #quiz-card {
            background: white;
            padding: 30px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 500px;
            text-align: center;
        }

        h1 {
            color: #e67e22;
            font-size: 1.5em;
        }

        #question-num {
            font-weight: bold;
            color: #666;
        }

        #upper-phrase {
            font-size: 1.3em;
            margin: 20px 0;
            min-height: 3em;
            display: flex;
            align-items: center;
            justify-content: center;
            line-height: 1.5;
        }

        .option-btn {
            display: block;
            width: 100%;
            padding: 15px;
            margin: 10px 0;
            border: 2px solid #f39c12;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1em;
            transition: 0.2s;
        }

        .option-btn:hover {
            background: #f39c12;
            color: white;
        }

        #result-area {
            margin-top: 20px;
            font-weight: bold;
            font-size: 1.2em;
            min-height: 1.5em;
        }

        .correct {
            color: #27ae60;
        }

        .incorrect {
            color: #e74c3c;
        }

        button:disabled {
            cursor: not-allowed;
            opacity: 0.6;
        }

        #next-btn {
            margin-top: 20px;
            padding: 10px 25px;
            background: #e67e22;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            display: none;
        }
    </style>
</head>

<body>

    <div id="quiz-card">
        <h1>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚ºã€ã‚‚ã‚‚ã€‘</h1>
        <p id="question-num">ç¬¬ 1 å• / 10</p>
        <div id="upper-phrase">ä¸Šã®å¥ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
        <div id="options"></div>
        <div id="result-area"></div>
        <button id="next-btn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
    </div>

    <div style="text-align: center; margin-top: 30px;">
        <a href="index.html" style="
        display: inline-block;
        padding: 10px 25px;
        background-color: #ff9d00;
        color: white;
        text-decoration: none;
        border-radius: 25px;
        box-shadow: 0 4px #e68a00;
        font-weight: bold;
        transition: 0.2s;
    ">ğŸ  ãƒ›ãƒ¼ãƒ ã«ã‚‚ã©ã‚‹</a>
    </div>

    <script>
        // CSVã‹ã‚‰æŠ½å‡ºã—ãŸã€Œã ã„ã ã„è‰²ã€ã®å³å¯†ãª20é¦–ãƒ‡ãƒ¼ã‚¿
        const allData = [
            { no: 1, u: "ã‚ãã®ãŸã® ã‹ã‚ŠãŠã®ã„ãŠã® ã¨ã¾ã‚’ã‚ã‚‰ã¿", l: "ã‚ãŒã“ã‚ã‚‚ã§ã‚ ã¤ã‚†ã«ã¬ã‚Œã¤ã¤" },
            { no: 4, u: "ãŸã”ã®ã†ã‚‰ã« ã†ã¡ã„ã§ã¦ã¿ã‚Œã° ã—ã‚ãŸãˆã®", l: "ãµã˜ã®ãŸã‹ã­ã« ã‚†ãã‚ãµã‚Šã¤ã¤" },
            { no: 13, u: "ã¤ãã°ã­ã® ã¿ã­ã‚ˆã‚ŠãŠã¤ã‚‹ ã¿ãªã®ãŒã‚", l: "ã“ã„ãã¤ã‚‚ã‚Šã¦ ãµã¡ã¨ãªã‚Šã¬ã‚‹" },
            { no: 16, u: "ãŸã¡ã‚ã‹ã‚Œ ã„ãªã°ã®ã‚„ã¾ã® ã¿ã­ã«ãŠã†ã‚‹", l: "ã¾ã¤ã¨ã—ãã‹ã° ã„ã¾ã‹ãˆã‚Šã“ã‚“" },
            { no: 22, u: "ãµãã‹ã‚‰ã« ã‚ãã®ãã•ãã® ã—ã‚’ã‚‹ã‚Œã°", l: "ã‚€ã¹ã‚„ã¾ã‹ãœã‚’ ã‚ã‚‰ã—ã¨ã‚†ãƒ¼ã‚‰ã‚“" },
            { no: 28, u: "ã‚„ã¾ã–ã¨ã‚ ãµã‚†ãã•ã³ã—ã• ã¾ã•ã‚Šã‘ã‚‹", l: "ã²ã¨ã‚ã‚‚ãã•ã‚‚ ã‹ã‚Œã¬ã¨ãŠã‚‚ãˆã°" },
            { no: 34, u: "ãŸã‚Œã‚’ã‹ã‚‚ ã—ã‚‹ã²ã¨ã«ã›ã‚“ ãŸã‹ã•ã”ã®", l: "ã¾ã¤ã‚‚ã‚€ã‹ã—ã® ã¨ã‚‚ãªã‚‰ãªãã«" },
            { no: 40, u: "ã—ã®ã¶ã‚Œã© ã„ã‚ã«ã„ã§ã«ã‘ã‚Š ã‚ãŒã“ã„ã‚", l: "ã‚‚ã®ã‚„ãŠã‚‚ãƒ¼ã¨ ã²ã¨ã®ã¨ãƒ¼ã¾ã§" },
            { no: 48, u: "ã‹ãœã‚’ã„ãŸã¿ ã„ã‚ã†ã¤ãªã¿ã® ãŠã®ã‚Œã®ã¿", l: "ãã ã‘ã¦ã‚‚ã®ã‚’ ãŠã‚‚ãƒ¼ã“ã‚ã‹ãª" },
            { no: 51, u: "ã‹ãã¨ã ã« ãˆã‚„ã‚ã„ã¶ãã® ã•ã—ã‚‚ãã•", l: "ã•ã—ã‚‚ã—ã‚‰ã˜ãª ã‚‚ã‚†ã‚‹ãŠã‚‚ã„ã‚’" },
            { no: 58, u: "ã‚ã‚Šã¾ã‚„ã¾ ã„ãªã®ã•ã•ã¯ã‚‰ ã‹ãœãµã‘ã°", l: "ã„ã§ãã‚ˆã²ã¨ã‚’ ã‚ã™ã‚Œã‚„ã‚ã™ã‚‹" },
            { no: 65, u: "ã†ã‚‰ã¿ã‚ã³ ã»ã•ã¬ãã§ã ã« ã‚ã‚‹ã‚‚ã®ã‚’", l: "ã“ã„ã«ãã¡ãªã‚“ ãªã“ããŠã—ã‘ã‚Œ" },
            { no: 66, u: "ã‚‚ã‚ã¨ã‚‚ã« ã‚ã‚ã‚Œã¨ãŠã‚‚ãˆ ã‚„ã¾ã–ãã‚‰", l: "ã¯ãªã‚ˆã‚Šã»ã‹ã« ã—ã‚‹ã²ã¨ã‚‚ãªã—" },
            { no: 72, u: "ãŠã¨ã«ãã ãŸã‹ã—ã®ã¯ã¾ã® ã‚ã ãªã¿ã‚", l: "ã‹ã‘ã˜ã‚„ãã§ã® ã¬ã‚Œã‚‚ã“ãã™ã‚Œ" },
            { no: 73, u: "ãŸã‹ã•ã”ã® ãŠã®ãˆã®ã•ãã‚‰ ã•ãã«ã‘ã‚Š", l: "ã¨ã‚„ã¾ã®ã‹ã™ã¿ ãŸãŸãšã‚‚ã‚ã‚‰ãªã‚“" },
            { no: 80, u: "ãªãŒã‹ã‚‰ã‚“ ã“ã“ã‚ã‚‚ã—ã‚‰ãš ãã‚ã‹ã¿ã®", l: "ã¿ã ã‚Œã¦ã‘ã•ã‚ ã‚‚ã®ã‚’ã“ããŠã‚‚ãˆ" },
            { no: 83, u: "ã‚ˆã®ãªã‹ã‚ˆ ã¿ã¡ã“ããªã‘ã‚Œ ãŠã‚‚ã„ã„ã‚‹", l: "ã‚„ã¾ã®ãŠãã«ã‚‚ ã—ã‹ããªããªã‚‹" },
            { no: 84, u: "ãªãŒã‚‰ãˆã° ã¾ãŸã“ã®ã”ã‚ã‚„ ã—ã®ã°ã‚Œã‚“", l: "ã†ã—ã¨ã¿ã—ã‚ˆã ã„ã¾ã‚ã“ã„ã—ã" },
            { no: 86, u: "ãªã’ã‘ã¨ã¦ ã¤ãã‚„ã‚ã‚‚ã®ã‚’ ãŠã‚‚ã‚ã™ã‚‹", l: "ã‹ã“ã¡ãŒãŠãªã‚‹ ã‚ãŒãªã¿ã ã‹ãª" },
            { no: 97, u: "ã“ã¬ã²ã¨ã‚’ ã¾ã¤ã»ã®ã†ã‚‰ã® ã‚†ãƒ¼ãªãã«", l: "ã‚„ãã‚„ã‚‚ã—ãŠã® ã¿ã‚‚ã“ãŒã‚Œã¤ã¤" },

        ];

        let currentQuestions = [];
        let currentIndex = 0;
        let score = 0;
        let wrongQuestions = []; // é–“é•ãˆãŸå•é¡Œã‚’ä¿å­˜ã™ã‚‹é…åˆ—
        let isReviewMode = false; // ä»ŠãŒå¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹

        function initQuiz() {
            isReviewMode = false;
            wrongQuestions = [];
            score = 0;
            currentIndex = 0;
            // æœ€åˆã¯ãƒ©ãƒ³ãƒ€ãƒ ã«10å•é¸ã¶
            currentQuestions = [...allData].sort(() => 0.5 - Math.random()).slice(0, 10);
            showQuestion();
        }

        function showQuestion() {
            const q = currentQuestions[currentIndex];
            const titlePrefix = isReviewMode ? "ã€å¾©ç¿’ã€‘" : "";
            document.getElementById("question-num").innerText = `${titlePrefix}ç¬¬ ${currentIndex + 1} å• / ${currentQuestions.length}`;
            document.getElementById("upper-phrase").innerText = q.u;
            document.getElementById("result-area").innerText = "";
            document.getElementById("next-btn").style.display = "none";

            let options = [q.l];
            let others = allData.filter(d => d.l !== q.l).sort(() => 0.5 - Math.random());
            options.push(others[0].l, others[1].l);
            options.sort(() => 0.5 - Math.random());

            const optionsDiv = document.getElementById("options");
            optionsDiv.innerHTML = "";
            options.forEach(opt => {
                const btn = document.createElement("button");
                btn.className = "option-btn";
                btn.innerText = opt;
                btn.onclick = () => checkAnswer(opt, q.l, q);
                optionsDiv.appendChild(btn);
            });
        }

        function checkAnswer(selected, correct, questionObj) {
            const resultArea = document.getElementById("result-area");
            const btns = document.getElementsByClassName("option-btn");
            for (let btn of btns) btn.disabled = true;

            if (selected === correct) {
                resultArea.innerHTML = "<span class='correct'>æ­£è§£ï¼</span>";
                if (!isReviewMode) score++;
            } else {
                resultArea.innerHTML = `<span class='incorrect'>æ®‹å¿µï¼æ­£è§£ã¯ï¼š<br>${correct}</span>`;
                // é–“é•ãˆãŸå•é¡Œã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼ˆé‡è¤‡ã—ãªã„ã‚ˆã†ã«ï¼‰
                if (!wrongQuestions.includes(questionObj)) {
                    wrongQuestions.push(questionObj);
                }
            }
            document.getElementById("next-btn").style.display = "inline-block";
        }

        function nextQuestion() {
            currentIndex++;
            if (currentIndex < currentQuestions.length) {
                showQuestion();
            } else {
                finishQuiz();
            }
        }

        function finishQuiz() {
            if (wrongQuestions.length > 0) {
                if (confirm(`çµ‚äº†ï¼ã‚¹ã‚³ã‚¢: ${score}/10\né–“é•ãˆãŸ ${wrongQuestions.length} å•ã‚’å¾©ç¿’ã—ã¾ã™ã‹ï¼Ÿ`)) {
                    startReview();
                } else {
                    initQuiz();
                }
            } else {
                // alert(`å…¨å•æ­£è§£ã§ã™ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼`);
                // initQuiz();
                showPointGetDialog(50, () => { location.href = '100home.html'; });
            }
        }

        function startReview() {
            isReviewMode = true;
            currentQuestions = [...wrongQuestions]; // é–“é•ãˆãŸå•é¡Œã ã‘ã§ãƒªã‚¹ãƒˆã‚’ä½œæˆ
            wrongQuestions = []; // å¾©ç¿’ä¸­ã«ã¾ãŸé–“é•ãˆãŸæ™‚ã®ãŸã‚ã«ãƒªã‚»ãƒƒãƒˆ
            currentIndex = 0;
            showQuestion();
        }

        initQuiz();
    </script>

    <script src="ranking.js"></script>
</body>

</html>