<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚º - ã ã„ã ã„è‰²</title>
    <style>
        body { 
            font-family: 'Helvetica Neue', Arial, sans-serif; 
            background-color: #f0f4f8; 
            display: flex; 
            flex-direction: column; /* ç¸¦ä¸¦ã³ */
            justify-content: center; 
            align-items: center; 
            min-height: 100vh; 
            margin: 0; 
            padding: 20px 0; /* ä¸Šä¸‹ã«å°‘ã—ä½™ç™½ã‚’è¿½åŠ  */
        }
        #quiz-card { background: white; padding: 30px; border-radius: 15px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 500px; text-align: center; }
        h1 { color: #e67e22; font-size: 1.5em; }
        #question-num { font-weight: bold; color: #666; }
        #upper-phrase { font-size: 1.3em; margin: 20px 0; min-height: 3em; display: flex; align-items: center; justify-content: center; line-height: 1.5; }
        .option-btn { display: block; width: 100%; padding: 15px; margin: 10px 0; border: 2px solid #f39c12; background: white; border-radius: 8px; cursor: pointer; font-size: 1em; transition: 0.2s; }
        .option-btn:hover { background: #f39c12; color: white; }
        #result-area { margin-top: 20px; font-weight: bold; font-size: 1.2em; min-height: 1.5em; }
        .correct { color: #27ae60; }
        .incorrect { color: #e74c3c; }
        button:disabled { cursor: not-allowed; opacity: 0.6; }
        #next-btn { margin-top: 20px; padding: 10px 25px; background: #e67e22; color: white; border: none; border-radius: 5px; cursor: pointer; display: none; }
    </style>
</head>
<body>

<div id="quiz-card">
    <h1>äº”è‰²ç™¾äººä¸€é¦–ã‚¯ã‚¤ã‚ºã€ã ã„ã ã„ã€‘</h1>
    <p id="question-num">ç¬¬ 1 å• / 10</p>
    <div id="upper-phrase">ä¸Šã®å¥ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</div>
    <div id="options"></div>
    <div id="result-area"></div>
    <button id="next-btn" onclick="nextQuestion()">æ¬¡ã®å•é¡Œã¸</button>
</div>

<div style="text-align: center; margin-top: 30px;">
    <a href="index.html" style="
        display: inline-block;
        padding: 10px 25px;
        background-color: #ff9d00;
        color: white;
        text-decoration: none;
        border-radius: 25px;
        box-shadow: 0 4px #e68a00;
        font-weight: bold;
        transition: 0.2s;
    ">ğŸ  ãƒ›ãƒ¼ãƒ ã«ã‚‚ã©ã‚‹</a>
</div>

<script>
    // CSVã‹ã‚‰æŠ½å‡ºã—ãŸã€Œã ã„ã ã„è‰²ã€ã®å³å¯†ãª20é¦–ãƒ‡ãƒ¼ã‚¿
    const allData = [
        {no:19, u:"ãªã«ã‚ãŒãŸ ã¿ã˜ã‹ãã‚ã—ã® ãµã—ã®ã¾ã‚‚", l:"ã‚ã¯ã§ã“ã®ã‚ˆã‚’ ã™ãã—ã¦ã‚ˆã¨ã‚„"},
        {no:21, u:"ã„ã¾æ¥ã‚“ã¨ ã„ãƒ¼ã—ã°ã‹ã‚Šã« ãªãŒã¤ãã®", l:"ã‚ã‚Šã‚ã‘ã®ã¤ãã‚’ ã¾ã¡ã„ã§ã¤ã‚‹ã‹ãª"},
        {no:25, u:"åã«ã—ãŠã‚ã° ãŠãƒ¼ã•ã‹ã‚„ã¾ã® ã•ã­ã‹ãšã‚‰", l:"ã²ã¨ã«ã—ã‚‰ã‚Œã§ ãã‚‹ã‚ˆã—ã‚‚ãŒãª"},
        {no:27, u:"ã¿ã‹ã®åŸ ã‚ãã¦ãªãŒã‚‹ã‚‹ æ³‰å·", l:"ã„ã¤ã¿ãã¨ã¦ã‹ ã“ã„ã—ã‹ã‚‹ã‚‰ã‚“"},
        {no:43, u:"ã‚ã„ã¿ã¦ã® ã®ã¡ã®ã“ã“ã‚ã« ãã‚‰ã¶ã‚Œã°", l:"ã‚€ã‹ã—ã¯ã‚‚ã®ã‚’ ãŠã‚‚ã‚ã–ã‚Šã‘ã‚Š"},
        {no:44, u:"ãŠ(ãŠ)ã“ã¨ã® ãŸãˆã¦ã—ãªãã° ãªã‹ãªã‹ã«", l:"ã²ã¨ã‚’ã‚‚ã¿ã‚’ã‚‚ ã†ã‚‰ã¿ã–ã‚‰ã¾ã—"},
        {no:45, u:"ã‚ã¯ã‚Œã¨ã‚‚ ã‚†ãƒ¼ã¹ãã²ã¨ã‚ ãŠã‚‚(ãŠ)ãˆã§", l:"ã¿ã®ã„ãŸãšã‚‰ã« ãªã‚Šã¬ã¹ãã‹ãª"},
        {no:49, u:"ã¿ã‹ãã‚‚ã‚Š ãˆã˜ã®ãŸãã²ã® ã‚ˆã‚‹ã‚ã‚‚ãˆ", l:"ã²ã‚‹ã¯ããˆã¤ã¤ ã‚‚ã®ã‚’ã“ããŠã‚‚ãˆ"},
        {no:52, u:"ã‚ã‘ã¬ã‚Œã° ãã‚‹ã‚‹ã‚‚ã®ã¨ã‚ ã—ã‚ŠãªãŒã‚‰", l:"ãªãŠã†ã‚‰ã‚ã—ã ã‚ã•ã¼ã‚‰ã‘ã‹ãª"},
        {no:53, u:"ãªã’ãã¤ã¤ ã²ã¨ã‚Šã¬ã‚‹ã‚ˆã® ã‚ãã‚‹ã¾ã‚", l:"ã„ã‹ã«ã²ã•ã—ã ã‚‚ã®ã¨ã‹ã‚ã—ã‚‹"},
        {no:56, u:"ã‚ã‚‰ã–ã‚‰ã‚“ ã“ã®ã‚ˆã®ã»ã‹ã® ãŠã‚‚ã„ã§ã«", l:"ã„ã¾ã²ã¨ãŸã³ã® ã‚ã†ã“ã¨ã‚‚ãŒãª"},
        {no:63, u:"ã„ã¾ã‚ãŸã  ãŠã‚‚ã„ãŸãˆãªã‚“ ã¨ã°ã‹ã‚Šã‚’", l:"ã²ã¨ã¥ã¦ãªã‚‰ã§ ã‚†ã†ã‚ˆã—ã‚‚ãŒãª"},
        {no:64, u:"æœã¼ã‚‰ã‘ ã†ã˜ã®ã‹ã‚ãã‚Šã€€ãŸãˆã ãˆã«", l:"ã‚ã‚‰ã¯ã‚Œã‚ãŸã‚‹ã€€ã›ãœã®ã‚ã˜ã‚ã"},
        {no:67, u:"ã¯ã‚‹ã®ã‚ˆã® ã‚†ã‚ã°ã‹ã‚Šãªã‚‹ æ‰‹ã¾ãã‚‰ã«", l:"ã‹ã²ãªããŸãŸã‚“ ãªã“ãã‚’ã—ã‘ã‚Œ"},
        {no:77, u:"ã›ã‚’ã¯ã‚„ã¿ ã„ã‚ã«ã›ã‹ã‚‹ã‚‹ ãŸããŒã‚ã®", l:"ã‚ã‚Œã¦ã‚‚ã™ãˆã« ã‚ã‚ã‚“ã¨ããŠã‚‚ã†"},
        {no:88, u:"ãªã«ã‚ãˆã® ã‚ã—ã®ã‹ã‚Šã­ã® ã²ã¨ã‚ˆã‚†ãˆ", l:"ã¿ã‚’ã¤ãã—ã¦ã‚„ ã“ã„ã‚ãŸã‚‹ã¹ã"},
        {no:90, u:"è¦‹ã›ã°ã‚„ãª ãŠã˜ã¾ã®ã‚ã¾ã® ãã§ã ã«ã‚‚", l:"ã¬ã‚Œã«ãã¬ã‚Œã— ã„ã‚ã‚ã‹ã‚ã‚‰ãš"},      
        {no:95, u:"ãŠã»ã‘ãªã ã†ãä¸–ã®æ°‘ã« ãŠã»ãµã‹ãª", l:"ã‚ãŒãŸã¤ãã¾ã« ã™ã¿ãã‚ã®ãã§"},
        {no:98, u:"é¢¨ãã‚ˆã ãªã‚‰ã®å°å·ã® å¤•ãã‚Œã¯", l:"ã¿ããããªã¤ã® ã—ã‚‹ã—ãªã‚Šã‘ã‚‹"},
        {no:99, u:"äººã‚‚ã‚’ã— äººã‚‚ã†ã‚‰ã‚ã— ã‚ã¢ããªã", l:"ã‚ˆã‚’ãŠã‚‚ãµã‚†ã‚‘ã« ã‚‚ã®ãŠã‚‚ãƒ¼ã¿ã‚"},
        
    ];

    let currentQuestions = [];
    let currentIndex = 0;
    let score = 0;
    let wrongQuestions = []; // é–“é•ãˆãŸå•é¡Œã‚’ä¿å­˜ã™ã‚‹é…åˆ—
    let isReviewMode = false; // ä»ŠãŒå¾©ç¿’ãƒ¢ãƒ¼ãƒ‰ã‹ã©ã†ã‹

    function initQuiz() {
        isReviewMode = false;
        wrongQuestions = [];
        score = 0;
        currentIndex = 0;
        // æœ€åˆã¯ãƒ©ãƒ³ãƒ€ãƒ ã«10å•é¸ã¶
        currentQuestions = [...allData].sort(() => 0.5 - Math.random()).slice(0, 10);
        showQuestion();
    }

    function showQuestion() {
        const q = currentQuestions[currentIndex];
        const titlePrefix = isReviewMode ? "ã€å¾©ç¿’ã€‘" : "";
        document.getElementById("question-num").innerText = `${titlePrefix}ç¬¬ ${currentIndex + 1} å• / ${currentQuestions.length}`;
        document.getElementById("upper-phrase").innerText = q.u;
        document.getElementById("result-area").innerText = "";
        document.getElementById("next-btn").style.display = "none";

        let options = [q.l];
        let others = allData.filter(d => d.l !== q.l).sort(() => 0.5 - Math.random());
        options.push(others[0].l, others[1].l);
        options.sort(() => 0.5 - Math.random());

        const optionsDiv = document.getElementById("options");
        optionsDiv.innerHTML = "";
        options.forEach(opt => {
            const btn = document.createElement("button");
            btn.className = "option-btn";
            btn.innerText = opt;
            btn.onclick = () => checkAnswer(opt, q.l, q);
            optionsDiv.appendChild(btn);
        });
    }

    function checkAnswer(selected, correct, questionObj) {
        const resultArea = document.getElementById("result-area");
        const btns = document.getElementsByClassName("option-btn");
        for(let btn of btns) btn.disabled = true;

        if (selected === correct) {
            resultArea.innerHTML = "<span class='correct'>æ­£è§£ï¼</span>";
            if(!isReviewMode) score++;
        } else {
            resultArea.innerHTML = `<span class='incorrect'>æ®‹å¿µï¼æ­£è§£ã¯ï¼š<br>${correct}</span>`;
            // é–“é•ãˆãŸå•é¡Œã‚’ãƒªã‚¹ãƒˆã«è¿½åŠ ï¼ˆé‡è¤‡ã—ãªã„ã‚ˆã†ã«ï¼‰
            if (!wrongQuestions.includes(questionObj)) {
                wrongQuestions.push(questionObj);
            }
        }
        document.getElementById("next-btn").style.display = "inline-block";
    }

    function nextQuestion() {
        currentIndex++;
        if (currentIndex < currentQuestions.length) {
            showQuestion();
        } else {
            finishQuiz();
        }
    }

    function finishQuiz() {
        if (wrongQuestions.length > 0) {
            if (confirm(`çµ‚äº†ï¼ã‚¹ã‚³ã‚¢: ${score}/10\né–“é•ãˆãŸ ${wrongQuestions.length} å•ã‚’å¾©ç¿’ã—ã¾ã™ã‹ï¼Ÿ`)) {
                startReview();
            } else {
                initQuiz();
            }
        } else {
            alert(`å…¨å•æ­£è§£ã§ã™ï¼ãŠã‚ã§ã¨ã†ã”ã–ã„ã¾ã™ï¼`);
            initQuiz();
        }
    }

    function startReview() {
        isReviewMode = true;
        currentQuestions = [...wrongQuestions]; // é–“é•ãˆãŸå•é¡Œã ã‘ã§ãƒªã‚¹ãƒˆã‚’ä½œæˆ
        wrongQuestions = []; // å¾©ç¿’ä¸­ã«ã¾ãŸé–“é•ãˆãŸæ™‚ã®ãŸã‚ã«ãƒªã‚»ãƒƒãƒˆ
        currentIndex = 0;
        showQuestion();
    }

    initQuiz();
</script>

</body>
</html>